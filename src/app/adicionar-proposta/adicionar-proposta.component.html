<div class="container mt-4">
    <h2 class="mb-4">Adicionar Proposta</h2>
    <form (ngSubmit)="onSubmit(proposalForm)" #proposalForm="ngForm" class="mb-4">
        <!-- Inserir Imagem -->
        <div class="mb-3">
            <label for="imageUpload" class="form-label"><i class="bi bi-image me-2"></i>Inserir Imagem</label>
            <input type="file" class="form-control" id="imageUpload" (change)="onFileSelected($event)"
                accept="image/*" />
        </div>
        <div class="mb-3">
            <img *ngIf="imagePreview" [src]="imagePreview" class="img-fluid"
                style="max-width: 300px; border: 1px solid #ccc; border-radius: 5px;"
                alt="Pré-visualização da Imagem" />
        </div>

        <!-- Título -->
        <div class="mb-3">
            <label for="titulo" class="form-label"><i class="bi bi-fonts me-2"></i>Título</label>
            <input type="text" class="form-control" id="titulo" name="titulo" ngModel required
                placeholder="Informe o título da proposta" />
        </div>

        <!-- Descrição -->
        <div class="mb-3">
            <label for="descricao" class="form-label"><i class="bi bi-card-text me-2"></i>Descrição</label>
            <textarea class="form-control" id="descricao" name="descricao" rows="4" ngModel required
                placeholder="Descreva sua proposta"></textarea>
        </div>

        <!-- Tipo -->
        <div class="mb-3">
            <label for="tipo" class="form-label"><i class="bi bi-tag me-2"></i>Tipo</label>
            <select class="form-select" id="tipo" name="tipo" [(ngModel)]="proposalData.tipo" required>
                <option value="melhoria" selected>Melhoria</option>
                <option value="reclamacao">Reclamação</option>
            </select>
        </div>

        <!-- Endereço -->
        <div class="mb-3">
            <label for="endereco" class="form-label"><i class="bi bi-geo-alt me-2"></i>Endereço</label>
            <textarea class="form-control" id="endereco" name="endereco" rows="3" ngModel required
                placeholder="Informe o endereço relacionado à proposta"></textarea>
        </div>

        <!-- Links Relacionados -->
        <div class="mb-3">
            <label class="form-label"><i class="bi bi-link me-2"></i>Links Relacionados</label>
            <div>
                <div *ngFor="let link of proposalData.links; let i = index; trackBy: trackByFn"
                    class="input-group mb-2">
                    <input type="url" class="form-control" [(ngModel)]="proposalData.links[i]" name="link{{ i }}"
                        placeholder="Informe um link relacionado" />
                    <button type="button" class="btn btn-danger" (click)="removeLink(i)">
                        <i class="bi bi-trash"></i>
                    </button>
                </div>
                <button type="button" class="btn btn-secondary mt-2" (click)="addLink()">
                    <i class="bi bi-plus-circle"></i> Adicionar Link
                </button>
            </div>
        </div>

        <!-- Botões -->
        <div class="d-flex justify-content-end mt-3">
            <button type="button" class="btn btn-secondary me-2" (click)="clearForm(proposalForm)"><i
                    class="bi bi-arrow-counterclockwise"></i> Limpar</button>
            <button type="submit" class="btn btn-primary" [disabled]="!proposalForm.valid"><i class="bi bi-send"></i>
                Enviar</button>
        </div>
    </form>
</div>